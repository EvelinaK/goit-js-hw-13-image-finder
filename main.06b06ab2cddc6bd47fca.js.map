{"version":3,"sources":["webpack:///./templates/card.hbs","webpack:///./services/gallery-Service.js","webpack:///./js/utils.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop","ImagesApiService","this","searchQuery","page","resetPage","getQueryPath","incrementPage","string","newNum","apiService","refs","$searchForm","document","querySelector","$galleryCont","$loadMorebutton","$galleryList","$ldsHeart","addEventListener","e","preventDefault","query","value","SearchQuery","input","currentTarget","elements","clearCountries","toggleLoader","infScroll","loadNextPage","target","nodeName","largeImgURL","dataset","source","basicLightbox","show","console","log","classList","toggle","innerHTML","InfiniteScroll","path","responseType","status","history","proxyElem","createElement","on","response","hits","JSON","parse","itemsHTML","cardTemplate","items","querySelectorAll","appendItems"],"mappings":"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","file":"main.06b06ab2cddc6bd47fca.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"cards\\\">\\r\\n    <div class=\\\"photo-card\\\">\\r\\n        <img src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":18},\"end\":{\"line\":4,\"column\":34}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"tags\") || (depth0 != null ? lookupProperty(depth0,\"tags\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tags\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":41},\"end\":{\"line\":4,\"column\":49}}}) : helper)))\n    + \"\\\" data-source=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":64},\"end\":{\"line\":4,\"column\":81}}}) : helper)))\n    + \"\\\" />\\r\\n\\r\\n        <div class=\\\"stats\\\">\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n                1108\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">visibility</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":16},\"end\":{\"line\":13,\"column\":25}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">comment</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":17,\"column\":16},\"end\":{\"line\":17,\"column\":25}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":16},\"end\":{\"line\":21,\"column\":29}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n        </div>\\r\\n    </div>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":26,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"\\r\\n\\r\\n\\r\\n\";\n},\"useData\":true});","// const baseUrl = 'https://pixabay.com/api/';\n\n// export default {\n//   page: 1,\n//   query: '',\n//   key: '18964408-9430149bbed18e9d9e56d5420',\n//   path() {\n//     const requestParams = `?image_type=photo&orientation=horizontal&q=${this.query}&page=${this.page}&per_page=12&key=${this.key}`;\n//     this.incrementPage();\n//     return baseUrl + requestParams;\n//   },\n//   fetchGallery() {\n//     const requestParams = `?image_type=photo&orientation=horizontal&q=${this.query}&page=${this.page}&per_page=12&key=${this.key}`;\n//     return fetch(baseUrl + requestParams)\n//       .then(res => res.json())\n//       .then(({ hits }) => {\n//         this.incrementPage();\n//         return hits;\n//       });\n//   },\n//   get SearchQuery() {\n//     return this.query;\n//   },\n//   set SearchQuery(string) {\n//     return (this.query = string);\n//   },\n\n//   incrementPage() {\n//     this.page += 1;\n//   },\n//   resetPage() {\n//     this.page = 1;\n//   },\n// };\n\nconst API_KEY = '19016514-f636b8f63ee9a8d1bcb803743';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst CORS = 'https://cors-anywhere.herokuapp.com/';\n\nexport default class ImagesApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  getQueryPath() {\n    return `${CORS}${BASE_URL}?image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=12&key=${API_KEY}`;\n    // return `${CORS}${BASE_URL}?key=${API_KEY}&image_type=photo&orientation=horizontal&q=${query}&page=${this.pageIndex}&per_page=12`;\n  }\n\n  get SearchQuery() {\n    return this.searchQuery;\n  }\n\n  set SearchQuery(string) {\n    return (this.searchQuery = string);\n  }\n\n  get pageNum() {\n    return this.page;\n  }\n\n  set pageNum(newNum) {\n    this.page = newNum;\n  }\n  incrementPage() {\n    this.page += 1;\n  }\n  resetPage() {\n    this.page = 1;\n  }\n}\n\n// const API_KEY = '19016514-f636b8f63ee9a8d1bcb803743';\n// const BASE_URL = 'https://pixabay.com/api/';\n// const CORS = 'https://cors-anywhere.herokuapp.com/';\n\n// export default class ImagesApiService {\n//   constructor() {\n//     this.searchQuery = '';\n//     this.page = 1;\n//     this.key = '18964408-9430149bbed18e9d9e56d5420';\n//   }\n\n//   // async fetchImages() {\n//   //   const url = `${BASE_URL}?key=${API_KEY}&image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=12`;\n\n//   //   const response = await fetch(url);\n//   //   const images = await response.json();\n\n//   //   return images;\n//   // }\n\n//   resetPage() {\n//     this.page = 1;\n//   }\n\n//   getQueryPath() {\n//     return `${CORS}${BASE_URL}?key=${API_KEY}&image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=12`;\n//   }\n\n//   get query() {\n//     return this.searchQuery;\n//   }\n\n//   set query(newQuery) {\n//     this.searchQuery = newQuery;\n//   }\n\n//   get pageNum() {\n//     return this.page;\n//   }\n\n//   set pageNum(newNum) {\n//     this.page = newNum;\n//   }\n// }\n","import InfiniteScroll from 'infinite-scroll';\r\nimport cardTemplate from '../templates/card.hbs';\r\nimport service from '../services/gallery-Service';\r\nimport * as basicLightbox from 'basiclightbox';\r\n// import { clearCountries } from './gallery';\r\nimport ImagesApiService from '../services/gallery-Service';\r\nconst apiService = new ImagesApiService();\r\nconst refs = {\r\n  $searchForm: document.querySelector('#search-form'),\r\n  $galleryCont: document.querySelector('#galleryCont'),\r\n  $loadMorebutton: document.querySelector('button[data-action=\"load-more\"]'),\r\n  $galleryList: document.querySelector('.gallery'),\r\n  $ldsHeart: document.querySelector('.lds-heart'),\r\n};\r\n////////-----------------обработчики события --------------------------------------/////////\r\nrefs.$searchForm.addEventListener('submit', searchformSubmitHandler);\r\n// refs.$loadMorebutton.addEventListener('click', loadMorebuttonHandler);\r\nrefs.$galleryList.addEventListener('click', openModalImg);\r\n\r\nfunction searchformSubmitHandler(e) {\r\n  e.preventDefault();\r\n  if (this.query.value === apiService.SearchQuery) {\r\n    return;\r\n  }\r\n\r\n  const form = e.currentTarget;\r\n  const input = form.elements.query;\r\n  clearCountries();\r\n  apiService.resetPage();\r\n\r\n  apiService.SearchQuery = input.value;\r\n\r\n  toggleLoader();\r\n  infScroll.loadNextPage();\r\n}\r\nfunction openModalImg({ target }) {\r\n  if (target.nodeName !== 'IMG') {\r\n    return;\r\n  }\r\n  const largeImgURL = target.dataset.source;\r\n\r\n  const instance = basicLightbox.create(`\r\n    <img src=\"${largeImgURL}\" width=\"800\" height=\"600\">\r\n  `);\r\n  instance.show();\r\n}\r\n\r\nconst toggleLoader = () => {\r\n  console.log('лоадер');\r\n  refs.$ldsHeart.classList.toggle('loaded');\r\n};\r\n\r\nconst clearCountries = () => {\r\n  refs.$galleryCont.innerHTML = '';\r\n};\r\n\r\nconst infScroll = new InfiniteScroll('#galleryCont', {\r\n  path() {\r\n    return apiService.getQueryPath();\r\n  },\r\n  //   path: function () {\r\n  //     return `${CORS}${baseUrl}?image_type=photo&orientation=horizontal&q=${query}&page=${this.pageIndex}&per_page=12&key=${key}`;\r\n  //   },\r\n  responseType: 'text',\r\n  status: '.scroll-status',\r\n  history: false,\r\n});\r\n\r\nvar proxyElem = document.createElement('div');\r\ninfScroll.on('load', function (response) {\r\n  var { hits } = JSON.parse(response);\r\n  console.log(hits);\r\n  apiService.incrementPage();\r\n  var itemsHTML = cardTemplate(hits);\r\n\r\n  proxyElem.innerHTML = itemsHTML;\r\n\r\n  var items = proxyElem.querySelectorAll('li.cards');\r\n  infScroll.appendItems(items);\r\n});\r\n\r\n// infScroll.loadNextPage();\r\n"],"sourceRoot":""}